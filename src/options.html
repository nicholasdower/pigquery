<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>PigQuery</title>
    <style>
      body { font: 14px/1.4 system-ui, sans-serif; margin: 0 16px; padding-bottom: 24px; background: #1e1e1e; color: #e0e0e0; }
      textarea { width: 100%; height: 180px; min-height: 180px; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; background: #2d2d2d; color: #e0e0e0; border: 1px solid #444; padding: 8px; box-sizing: border-box; resize: vertical; margin-top: 12px; }
      textarea::placeholder { color: #888; }
      textarea[readonly] { background: #252525; color: #aaa; height: 180px; min-height: 180px; max-height: 180px; overflow-y: auto; }
      input[type="text"] { width: 100%; padding: 6px 10px; background: #2d2d2d; color: #e0e0e0; border: 1px solid #444; border-radius: 4px; font-size: 14px; box-sizing: border-box; margin-top: 12px; }
      input[type="text"]::placeholder { color: #888; }
      .row { display: flex; gap: 8px; align-items: center; margin-top: 10px; flex-wrap: wrap; }
      button { padding: 6px 10px; background: #0e639c; color: #fff; border: none; border-radius: 4px; cursor: pointer; }
      button:hover { background: #1177bb; }
      button:disabled { opacity: 0.5; cursor: not-allowed; }
      button:disabled:hover { background: #0e639c; }
      button.danger { background: #a31515; }
      button.danger:hover { background: #c41818; }
      button.danger:disabled:hover { background: #a31515; }
      button.secondary { background: #3c3c3c; }
      button.secondary:hover { background: #505050; }
      button.secondary:disabled:hover { background: #3c3c3c; }
      .status { font-size: 12px; margin-top: 6px; min-height: 1.4em; display: block; }
      .row .status { margin-top: 0; display: inline; min-height: auto; }
      .error { color: #f48771; }
      .ok { color: #89d185; }
      .muted { color: #999; }
      .header { display: flex; align-items: center; gap: 12px; margin-top: 16px; }
      .header img { width: 32px; height: 32px; }
      h1 { color: #e0e0e0; margin: 0; }
      h2 { color: #e0e0e0; margin: 24px 0 0 0; font-size: 16px; }
      .source-card { margin-top: 24px; }
      .source-header { display: flex; justify-content: space-between; align-items: center; gap: 12px; }
      .source-info { flex: 1; min-width: 0; }
      .source-url { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 12px; color: #6cb6ff; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      .source-meta { font-size: 12px; color: #888; margin-top: 2px; }
      .source-meta.error { color: #f48771; }
      .source-card textarea { margin-top: 8px; }
      .source-actions { display: flex; gap: 6px; align-items: center; flex-shrink: 0; }
      .source-actions button { padding: 4px 8px; font-size: 12px; }
      .empty-state { color: #888; font-style: italic; padding-top: 16px; text-align: center; }
      .example-textarea { font-size: 12px; resize: none; }
      .row input[type="text"] { flex: 1; margin-top: 0; }
      .refresh-row { margin-top: 6px; }
      .shortcut-btn { min-width: 200px; padding: 6px 12px; background: #2d2d2d; color: #e0e0e0; border: 1px solid #444; border-radius: 4px; font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif; font-size: 13px; text-align: center; cursor: pointer; }
      .shortcut-btn:hover { background: #383838; border-color: #555; }
      .shortcut-btn:disabled { opacity: 0.5; cursor: not-allowed; }
      .shortcut-btn:disabled:hover { background: #2d2d2d; border-color: #444; }
    </style>
  </head>
  <body>
    <div class="header">
      <img src="../icons/icon.svg" alt="PigQuery Logo">
      <h1>PigQuery</h1>
    </div>

    <!-- Keyboard Shortcuts Section -->
    <h2 data-i18n="shortcutInsertSnippet">Insert Snippet Shortcut</h2>
    <div class="row">
      <button type="button" class="shortcut-btn" id="shortcut-insertSnippet"></button>
      <button id="resetShortcuts" type="button" class="secondary" data-i18n="optionsResetShortcut">Reset</button>
      <span id="shortcutsStatus" class="status muted"></span>
    </div>

    <!-- Example Section -->
    <h2 data-i18n="optionsExample">Example</h2>
    <textarea id="example" class="example-textarea" readonly spellcheck="false"></textarea>

    <!-- Remote Sources Section -->
    <h2 data-i18n="optionsRemoteSources">Remote Sources</h2>
    <div class="row">
      <input type="text" id="urlInput" placeholder="Enter YAML URL" data-i18n-placeholder="optionsUrlPlaceholder" />
      <button id="addUrl" type="button" data-i18n="optionsAddUrl">Add URL</button>
    </div>
    <span id="addUrlStatus" class="status muted"></span>
    <div class="row refresh-row">
      <button id="refreshAll" type="button" class="secondary" data-i18n="optionsRefreshAll">Refresh All</button>
      <span id="refreshStatus" class="status muted"></span>
    </div>
    <div id="remoteSources"></div>

    <!-- Local Configuration Section -->
    <h2 data-i18n="optionsLocalConfig">Local Configuration</h2>
    <textarea id="payload" spellcheck="false" placeholder="Enter configuration" data-i18n-placeholder="optionsPlaceholder"></textarea>
    <div class="row">
      <button id="save" type="button" data-i18n="optionsSave">Save</button>
      <span id="localStatus" class="muted"></span>
    </div>

    <script src="../lib/js-yaml.min.js"></script>
    <script src="i18n.js"></script>
    <script src="config.js"></script>
    <script src="options.js"></script>
  </body>
</html>
